1. [Hyperledger Iroha](index.html)
2. [Hyperledger Iroha](Hyperledger-Iroha_20873224.html)
3. [Iroha 2](Iroha-2_21012047.html)
4. [Requests for Comments](Requests-for-Comments_21016001.html)

# Hyperledger Iroha : Telemetry

Created by Ivan Rybin, last modified by Aler Denisov on Apr 28, 2021

  Status

NOT STARTED 

Stakeholders

[武宮誠](https://lf-hyperledger.atlassian.net/wiki/people/557058:12c320e6-5d17-404f-b20e-bfa5721ae960?ref=confluence) [Aler Denisov](https://lf-hyperledger.atlassian.net/wiki/people/6065c7b090e3950069d900af?ref=confluence)

OutcomeDue dateOwner[Ivan Rybin](https://lf-hyperledger.atlassian.net/wiki/people/602171f07db80e006a08ad45?ref=confluence)

## Background

A rich toolkit for collecting information about the execution of decentralized and distributed systems is the only way to react in time and notice failures

## Core requirements

1. Distributed design requires continuous collection of information from all nodes of the system, regardless of its integrity (ex. connection issues or desync)
2. A single solution regardless of the final configuration (a local network of developers from several nodes, a distributed business network with different administrators, or even a public network)
3. Isolation of public and private information without disclosure

## Overview

Accordingly, with point #1, nodes must transmit their telemetry data to the configured endpoint. Aggregation and caching for future analysis is the responsibility of the end service.

Based on the nature of data node selects public or private endpoint as the destination point. All transmission is done in a push model from the node to the end service.

Pic #1:

![](https://i.imgur.com/KAusRwv.png)

As shown in the picture, participation in the collection of telemetry data is optional and Company C avoids it. To respect this choice, the publicly available data should not contain any details about company C nodes.

## End service

To support various monitoring and analytics tools, the end service can run in three different ways:  
1\) As a simple proxy of incoming data to support tools with push-model. The service will wrap incoming data with node id and push forward.  
2\) As a queue. The service will cache all incoming data until a future request from the consumer(s).  
3\) As an aggregation layer. The service will store all incoming data and calculate summaries for future requests.

## Data

### Raw messages from nodes

CategoryPublicPrivateInitial

network\_id: string

chain: string

name: string

version: string

location?: string

public\_key: pubkey

startup\_time: number

os\_name: string

ip\_address: string

port: string

modules: actor\_slug\[]

Tick

connected\_peers: integer

tx\_count: integer

bandwidth\_upload: float

bandwidth\_download: float

finalized\_height: integer

finalized\_hash: hash

latest\_height: integer

latest\_hash: hash

available\_ram: integer

available\_disk: integer

cpu\_consumption: float

Block

type: proposal | vote |  commit | finalized

height: integer

hash: hash

validators: pubkey\[]

transactions: hash\[]

Transaction

hash: hash

size: intereger

signatories: pubkey\[]

data?: blob

Connection

type: discovered | connected | disconnected

ping: integer

public\_key: pubkey

karma?: integer

ip\_address: string

port: string

### Aggregations

1. Peer based:
   
   1. Uptime
   2. Avg bandwidth
   3. Avg ping
2. State based:
   
   1. Finalized block
   2. Average block time
   3. Time since last block
   4. Block propagation time
   5. Avg number of transactions in blocks
   6. Number of pending transaction
   7. Number of active users (signatories)

### Decisions

1. Minimize middleware count
2. Split private data (used for administration purposes) and public data

## Additional Information

Prometheus metric types [https://prometheus.io/docs/concepts/metric\_types/](https://prometheus.io/docs/concepts/metric_types/)

Substrate telemetry types and open-source monitor: [https://github.com/paritytech/substrate-telemetry/blob/master/backend/src/types.rs](https://github.com/paritytech/substrate-telemetry/blob/master/backend/src/types.rs)

Document generated by Confluence on Nov 26, 2024 15:06

[Atlassian](http://www.atlassian.com/)
