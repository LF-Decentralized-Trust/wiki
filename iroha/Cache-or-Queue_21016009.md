1. [Hyperledger Iroha](index.html)
2. [Hyperledger Iroha](Hyperledger-Iroha_20873224.html)
3. [Iroha 2](Iroha-2_21012047.html)
4. [Architecture Decision Records Log](Architecture-Decision-Records-Log_21016003.html)
5. [Multisignature transactions](Multisignature-transactions_21012372.html)

# Hyperledger Iroha : Cache or Queue

Created by Nikita Puzankov, last modified on Jul 03, 2020

## Shorthand

Discussion participants: [Kamil Salakhiev](https://lf-hyperledger.atlassian.net/wiki/people/557058:07723e0b-a027-4cc4-ad6d-324e41cccb4d?ref=confluence), [武宮誠](https://lf-hyperledger.atlassian.net/wiki/people/557058:12c320e6-5d17-404f-b20e-bfa5721ae960?ref=confluence), [Andrei Lebedev](https://lf-hyperledger.atlassian.net/wiki/people/557058:c02f1b3d-42e6-4519-ba84-2d0476dccbc9?ref=confluence)

[Kamil Salakhiev](https://lf-hyperledger.atlassian.net/wiki/people/557058:07723e0b-a027-4cc4-ad6d-324e41cccb4d?ref=confluence) :

> We will design MST differently for Iroha2. As @lebdron suggests we will store pending transactions in blocks. They will be executed only when enough signatures are collected.  
This is more convenient way to get statuses of transactions and keep all nodes in sync regarding MST transactions they have

[武宮誠](https://lf-hyperledger.atlassian.net/wiki/people/557058:12c320e6-5d17-404f-b20e-bfa5721ae960?ref=confluence) :

> It’s a bad design, It’s much better to keep things in a pending cache and have them disappear if they don’t get enough signatories in time.
> 
> Otherwise, if you have a situation like on sora net with a transaction fee, then no one will pay the fee if the transaction is not validated and you just filled up blocks for free. The other way is to charge to put every signatory in the blockchain. This can work, but is not so friendly.
> 
> Let’s think about this some more

[Kamil Salakhiev](https://lf-hyperledger.atlassian.net/wiki/people/557058:07723e0b-a027-4cc4-ad6d-324e41cccb4d?ref=confluence) :

> Cache is volatile. If node was restarted we will not be able to fetch accounts pending transactions

[Nikita Puzankov](https://lf-hyperledger.atlassian.net/wiki/people/5df113768998970e5b434e0a?ref=confluence) :

> what about TTL for transactions?

[Andrei Lebedev](https://lf-hyperledger.atlassian.net/wiki/people/557058:c02f1b3d-42e6-4519-ba84-2d0476dccbc9?ref=confluence) :

> Cache will be a frontend to transactions stored in blocks. This will ensure that all nodes have a consistent state

[Nikita Puzankov](https://lf-hyperledger.atlassian.net/wiki/people/5df113768998970e5b434e0a?ref=confluence) :

> Cache is a WorldStateView or another cache?

[Kamil Salakhiev](https://lf-hyperledger.atlassian.net/wiki/people/557058:07723e0b-a027-4cc4-ad6d-324e41cccb4d?ref=confluence) :

> Another cache

[武宮誠](https://lf-hyperledger.atlassian.net/wiki/people/557058:12c320e6-5d17-404f-b20e-bfa5721ae960?ref=confluence) :

> Just sync. Anyway, I thought about it and storing on chain is not an option. If you take a transaction fee for that, then just one signatory can make your account go to 0, which defeats the purpose of multisig. The MST cache in Iroha allowing automatic collation of transactions is actually one of the best features of Iroha now and Iroha2 will definitely continue this.
> 
> You need 2 temporary caches. Pending transactions and pending MST transactions. Blocks are created from pending transactions cache. MST transactions sit in the cache until they expire or until they get signatures needed from signatories, which will then enable them to move to the pending transactions cache and be put into a block
> 
> Without an MST transactions cache, multisig has to be done interactively with the clients, which is really terrible for app devs. Instead in Iroha, you can just send your signature to the server and the Iroha nodes will automagically collect all the signatures from clients and then confirm the transaction once the conditions are met.

Document generated by Confluence on Nov 26, 2024 15:06

[Atlassian](http://www.atlassian.com/)
