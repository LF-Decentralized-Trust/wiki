1. [Hyperledger Iroha](index.html)
2. [Hyperledger Iroha](Hyperledger-Iroha_20873224.html)
3. [Iroha 1](Iroha-1_21015959.html)
4. [Instructions](Instructions_21015946.html)

# Hyperledger Iroha : Iroha and OSS-fuzz

Created by Konstantin Munichev, last modified by Михаил Болдырев on Oct 17, 2019

Iroha was accepted into [oss-fuzz](https://github.com/google/oss-fuzz) project by Google. It allows Iroha to have a continuous fuzzing process for free. When a bug (crash, timeout, out of memory etc) is found OSS notifies fuzzing maintainer and other people who are involved, it also provides a link to the bug details, including input lead to the crash. You can reproduce the issue locally with the provided input. Google sets a 90 days deadline before the bug information disclosure.

## Local reproducing

Build Iroha with -DFUZZING=ON under clang. **Don't use Apple clang**, use mainstream.

If you want to **run fuzzing**, add LIB\_FUZZING\_ENGINE='-fsanitize=fuzzer' environment variable. After that you can run fuzzing by executing required fuzz test executable. It is not required if you only want to reproduce and debug a known crash (having a crash file).

```
cmake -DCMAKE_C_COMPILER=/usr/local/opt/llvm/bin/clang -DCMAKE_CXX_COMPILER=/usr/local/opt/llvm/bin/clang++ -DFUZZING=ON  <...>
```

Now you can build fuzzing targets with

```
make fuzzing
```

You can also build them one by one using these names (as of v1.1): torii\_fuzz, status\_fuzz, find\_fuzz, mst\_fuzz, consensus\_fuzz, request\_proposal\_fuzz, send\_batches\_fuzz, retrieve\_block\_fuzz, retrieve\_blocks\_fuzz. There is one fuzzing target for every endpoint.

After that if you run any of targets they will exit without any output. It happens because they are intended to reproduce crashes (and to perform fuzzing by itself). To use it download crash file (the typical name looks like clusterfuzz-testcase-minimized-find\_fuzz-5745437956374528) and run:

```
./find_fuzz clusterfuzz-testcase-minimized-find_fuzz-574543795637452
```

If crash reproduces successfully you will see a crash. To get a stacktrace run it the target under gdb (lldb).

## Further reading

Please start at [https://github.com/google/oss-fuzz](https://github.com/google/oss-fuzz) - all the necessary information could be found here (the docs structure could be better though).

Please notice the next [comment](https://github.com/google/oss-fuzz/pull/2753#pullrequestreview-279857424). It contains information about possible fuzzing improvements - I guess it's worth to do.

Document generated by Confluence on Nov 26, 2024 15:05

[Atlassian](http://www.atlassian.com/)
