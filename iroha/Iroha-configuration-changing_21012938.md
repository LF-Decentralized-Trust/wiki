1. [Hyperledger Iroha](index.html)
2. [Hyperledger Iroha](Hyperledger-Iroha_20873224.html)
3. [Iroha 2](Iroha-2_21012047.html)
4. [Requests for Comments](Requests-for-Comments_21016001.html)

# Hyperledger Iroha : Iroha configuration changing

Created by Ivan Rybin, last modified by Aler Denisov on Apr 05, 2021

  Status

NOT STARTED IN PROGRESS DECIDED

Stakeholders

[武宮誠](https://lf-hyperledger.atlassian.net/wiki/people/557058:12c320e6-5d17-404f-b20e-bfa5721ae960?ref=confluence) [Aler Denisov](https://lf-hyperledger.atlassian.net/wiki/people/6065c7b090e3950069d900af?ref=confluence)

OutcomeDue dateOwner

[Ivan Rybin](https://lf-hyperledger.atlassian.net/wiki/people/602171f07db80e006a08ad45?ref=confluence)

## Background

There is a set of requirements for test stand, one of which is the ability to change local configuration of node at its runtime.

[https://soramitsu.atlassian.net/wiki/spaces/DOPS/pages/1938194493/Project+acceptance+checklist](https://soramitsu.atlassian.net/wiki/spaces/DOPS/pages/1938194493/Project+acceptance+checklist)

## Problem

Current problem is that there are a plenty of actors which have its own state which don't contain (and therefore don't check) configuration, but rather copy it on initialization.

## Solution

### Decisions

### Alternatives

There are several solutions to this problem.

#### Arc&lt;RwLock&lt;Configuration&gt;&gt;

It involves putting everything inside Arc&lt;RwLock&lt;Configuration&gt;&gt;. Current iroha\_config crate knows about it and allows reading and writing to asynchronous locks. We can also add some caching for reading configuration (f.e. update it every minute). Also it won't involve much refactoring.

#### Configuration View

This solution is modification of Arc&lt;RwLock&lt;Configuration&gt;&gt;, it involves creation of structure which hides reference for easier future design changes. It can in future have some id of current configuration (like hash) and if something changes we can recache new config and give it back to actor.

#### Event propagation (diffs)

Main motivation for this solution is that besides general local configuration there is also consensus configuration which should be updated only at the end of the round. This solution involves using channels and probably requires rework for iroha\_config.

### Concerns

### Assumptions

### Risks

## Additional Information

There is an interesting design idea to remove consensus and other critical to change configuration to new structure.

Document generated by Confluence on Nov 26, 2024 15:06

[Atlassian](http://www.atlassian.com/)
