1. [Besu](index.html)
2. [Besu](Besu_22151173.html)
3. [Performance &amp; Stability](22155524.html)

# Besu : Fast sync optimisation

Created by Nicolas Massart, last modified on Apr 08, 2022

This page is a work in progress

## Environment setup

### Hardware

[AWS i3.xlarge](https://aws.amazon.com/ec2/instance-types/i3/)

### Deployment

TODO add Ansible scripts used to run this tests

## Testing process

Three distinct runs of about 32478 imports (1 import = 200 blocks) → took between 5 hours 30 minutes and 6 hours. 

### Collected data

- Median response time per 200 blocks import
- System metrics
  
  - CPU
  - Memory
  - Disk IO
  - Network IO
- CPU Profiling
- Memory Profiling

## Initial reference results

**Global elapsed time**

**Number of imports (1 import = 200 blocks)**

**Average Response time import 200 blocks (ms)**

**Median response time import 200 blocks (ms)**

**90th percentile response time import 200 blocks (ms)**

**95th percentile response time import 200 blocks (ms)**

**Maximum response time import 200 blocks (ms)**

**Execution #1**

5 hours, 55 minutes

32478

632

294

1450

2210

27300

**Execution #2**

5 hours, 39 minutes

32674

611

308

1350

2020

18300

**Execution #3**

5 hours, 48 minutes

32770

616

325

1320

2010

27000

### Median response time per 200 blocks import

#### Execution #1

### ![](attachments/22155526/22155529.png?height=250)

#### Execution #2

![](attachments/22155526/22155530.png?height=250)

#### Execution #3

![](attachments/22155526/22155531.png?height=250)

## Optimisation attempts

### Attempt 1: Execute World Sate download before block Imports

#### Expected effect

TODO

#### Results

TODO

#### Decision

TODO

## Attachments:

![](images/icons/bullet_blue.gif) [image2022-4-8\_16-8-6.png](attachments/22155526/22155529.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-4-8\_16-11-26.png](attachments/22155526/22155530.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-4-8\_16-11-44.png](attachments/22155526/22155531.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 10.55.20.png](attachments/22155526/22155552.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 10.57.24.png](attachments/22155526/22155553.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 10.58.16.png](attachments/22155526/22155554.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 10.59.39.png](attachments/22155526/22155555.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.00.37.png](attachments/22155526/22155556.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.02.33.png](attachments/22155526/22155557.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.03.40.png](attachments/22155526/22155558.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.06.17.png](attachments/22155526/22155559.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.07.39.png](attachments/22155526/22155560.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.09.09.png](attachments/22155526/22155561.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.10.10.png](attachments/22155526/22155562.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.10.50.png](attachments/22155526/22155563.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.16.02.png](attachments/22155526/22155564.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.17.50.png](attachments/22155526/22155565.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.19.22.png](attachments/22155526/22155566.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.24.25.png](attachments/22155526/22155567.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.37.13.png](attachments/22155526/22155568.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.37.30.png](attachments/22155526/22155569.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.41.19.png](attachments/22155526/22155570.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.42.10.png](attachments/22155526/22155571.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.42.55.png](attachments/22155526/22155572.png) (image/png)  
![](images/icons/bullet_blue.gif) [Screenshot 2022-04-23 at 11.43.25.png](attachments/22155526/22155573.png) (image/png)

Document generated by Confluence on Nov 26, 2024 13:01

[Atlassian](http://www.atlassian.com/)
